<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css">
    <title>Agendar Servicio para Auto</title>
    <style>
        body {
            background-color: #f8f9fa;
            background: url('imagenes/fondo_general.jpg') no-repeat center center fixed;
    background-size: cover;
        }
        .contact-container {
            max-width: 600px;
            margin: 50px auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="imagenes/logo.png" alt="AutoSource">
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="coches.html">Vehiculos</a></li>
                <li><a href="cotizaciones.html">Cotizaciones</a></li>
                <li><a href="proxi.html">Proximamente</a></li>
            </ul>
        </nav>
        <!-- Iconos de Login y Carrito -->
        <div class="iconos">
            <a href="inicio_secion.html">Login</a>
            
        </div>
    </header>

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Inicio</a></li>
          <li class="breadcrumb-item active" aria-current="page">Servicio</li>
        </ol>
      </nav>

    <div class="container">
        <h2>Complete el formulario</h2>
        <form id="serviceForm">
            <input type="text" id="name" placeholder="Nombre Completo" required>
            <input type="email" id="email" placeholder="Correo Electrónico" required>
            <input type="tel" id="phone" placeholder="Teléfono" required>
            <input type="text" id="carModel" placeholder="Modelo del Auto" required>
            <select id="serviceType" required>
                <option value="">Seleccione el tipo de servicio</option>
                <option value="Cambio de aceite">Cambio de aceite</option>
                <option value="Revisión general">Revisión general</option>
                <option value="Frenos">Revisión de frenos</option>
                <option value="Batería">Revisión de batería</option>
            </select>
            <input type="date" id="date" required>
            <button type="submit">Agendar Servicio</button>
        </form>
        <p id="confirmation" style="display: none; color: green; font-weight: bold;">¡Servicio agendado con éxito!</p>
    </div>


    <footer>
        <p>Síguenos en:</p>
        <div class="redes">
            <a href="https://www.facebook.com"><i class="fab fa-facebook-f"></i></a>
            <a href="https://www.twitter.com"><i class="fab fa-twitter"></i></a>
            <a href="https://www.instagram.com"><i class="fab fa-instagram"></i></a>
            <a href="http://www.youtube.com"><i class="fab fa-youtube"></i></a>
        </div>
    
        <!-- Mapa de sitio -->
        <section class="mapa-sitio">
            <h3>Mapa de sitio</h3>
            <ul class="mapa-lista">
                <li><a href="coches.html">Vehículos</a></li>
                <li><a href="cotizaciones.html">Cotizaciones</a></li>
                <li><a href="servicio.html">Servicios</a></li>
                <li><a href="localizar.html">Localiza tu Distribuidor</a></li>
                <li><a href="prueba.html">Prueba de Manejo</a></li>
                <li><a href="proxi.html">Próximamente</a></li>
                <li><a href="contacto.html">Contacto</a></li>
            </ul>
        </section>
    </footer>

    <script>
        document.getElementById("serviceForm").addEventListener("submit", function(event) {
            event.preventDefault();
            document.getElementById("confirmation").style.display = "block";
        });
    </script>
    <script>
    document.getElementById("serviceForm").addEventListener("submit", async function(event) {
        event.preventDefault();

        const datosServicio = {
            nombre: document.getElementById("name").value,
            email: document.getElementById("email").value,
            telefono: document.getElementById("phone").value,
            modeloAuto: document.getElementById("carModel").value,
            tipoServicio: document.getElementById("serviceType").value,
            fecha: document.getElementById("date").value
        };

        try {
            const respuesta = await fetch("http://localhost:5000/api/agendar-servicio", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(datosServicio)
            });

            const resultado = await respuesta.json();

            if (respuesta.ok) {
                document.getElementById("confirmation").style.display = "block";
            } else {
                alert("Error al agendar servicio: " + resultado.error);
            }
        } catch (error) {
            console.error("Error en la solicitud:", error);
        }
    });
</script>
</body>
</html>
